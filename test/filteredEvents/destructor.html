<h1>hello sunshine</h1>

<script type="module">

  class CountEventController {
    #el;

    constructor(el) {
      this.#el = el;
      el.setAttribute("clicks", 3);
      el.addEventListener("click", e => el.setAttribute("clicks", parseInt(e.currentTarget.getAttribute("clicks")) + 1));
    }

    destructor() {
      this.#el.removeAttribute("clicks");
    }
  }

  customEvents.define("count", CountEventController)

  function logClicks(e) {
    console.log(e.currentTarget.getAttribute("clicks"));
  }

  const h1 = document.querySelector("h1");
  console.log(h1.getAttribute("clicks"));
  h1.addEventListener("count", logClicks);
  console.log(h1.getAttribute("clicks"));
  h1.click();
  console.log(h1.getAttribute("clicks"));
  h1.removeEventListener("count", logClicks);
  console.log(h1.getAttribute("clicks"));
</script>