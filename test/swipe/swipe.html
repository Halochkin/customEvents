<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Swipe</title>
    <style>
        #elem {
            position: absolute;
            width: 450px;
            height: 450px;
            background-color: red;
        }

        #viewport {
            display: inline-block;
            width: 450px;
            height: 450px;
            position: relative;
            overflow: hidden;
            background-color: yellow;
            margin: 10px;
            /*margin-top: 20px;*/
            border-radius: 10px;
        }
    </style>

</head>
<body>

<div swipe id="viewport" touch-action="pan-left" pointer-distance="100">
    <div id="elem"></div>
</div>

</body>
<script type="module">

    import {} from "../../src/customEvents.js";
    import {Swipe} from "../../src/events/swipe.js";

    customEvents.define("swipe", Swipe);

    const colorPicker = () => 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
    const viewport = document.getElementById("viewport");

    viewport.addEventListener("swipe", e => {
        viewport.children[0].style.transitionDuration = "0.8s";
        if (e.detail.direction === "right") {
            viewport.children[0].style.transform = "rotate(15deg)";
            viewport.children[0].style.marginLeft = "-650px";
        } else if (e.detail.direction === "left") {
            viewport.children[0].style.transform = "rotate(-15deg)";
            viewport.children[0].style.marginLeft = "650px";
        } else
            return;

        setTimeout(() => {
            if (!viewport.children[0].parentNode)
                return;
            viewport.children[0].parentNode.removeChild(viewport.children[0]);
            let el = document.createElement("div");
            el.id = "elem";
            el.transitionDuration = "1s";
            el.style.backgroundColor = colorPicker();
            viewport.appendChild(el);
        }, 500);
    });
</script>
</html>